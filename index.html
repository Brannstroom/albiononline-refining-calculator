<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Resource Refining Table</title>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  </head>
  <body>
    <h1>Resource Refining Calculator</h1>

    <div class="profile">
        <div class="refining-settings">
            <div class="refining-station">
                <h3>Refining Station</h3>
                <label for="refining-resource">Resource</label>
                <select id="refining-resource" onchange="init()">
                    <option value="0">Cloth</option>
                    <option value="1">Bar</option>
                    <option value="2">Leather</option>
                    <option value="3">Wood</option>
                </select>

                <label for="refining-station-tax">Tax</label>
                <input type="number" id="refining-station-tax" value="0" min="0" max="9999" onClick="this.select();" oninput="updateNumbers(this)">           

                <label for="refining-station">Amount</label>
                <input type="number" id="refining-station-amount" value="1" min="1" onClick="this.select();" oninput="updateNumbers(this)">                
            </div>
            <br>

            <div>
                <label for="refining-location">Return rate</label>
                <select id="refining-station-return-rate" onchange="updateNumbers(this)">
                    <option value="15.2">Royal City (15.2%)</option>
                    <option value="36.7">Royal City with Bonus (36.7%)</option>
                    <option value="0">Royal Island (0%)</option>
                    <option value="28.5">Royal Island with Bonus (28.5%)</option>
                    <option value="20">Black Zone Hideout (20%)</option>
                </select>
            </div>

            <div class="refining-mastery">
                <h3>Refining Mastery</h3>

                <label for="refining-mastery">T4</label>
                <input type="number" id="refining-mastery-t4" value="0" min="0" max="100" onClick="this.select();" oninput="updateNumbers(this)">

                <label for="refining-mastery">T5</label>
                <input type="number" id="refining-mastery-t5" value="0" min="0" max="100" onClick="this.select();" oninput="updateNumbers(this)">

                <label for="refining-mastery">T6</label>
                <input type="number" id="refining-mastery-t6" value="0" min="0" max="100" onClick="this.select();" oninput="updateNumbers(this)">

                <label for="refining-mastery">T7</label>
                <input type="number" id="refining-mastery-t7" value="0" min="0" max="100" onClick="this.select();" oninput="updateNumbers(this)">

                <label for="refining-mastery">T8</label>
                <input type="number" id="refining-mastery-t8" value="0" min="0" max="100" onClick="this.select();" oninput="updateNumbers(this)">
            </div>
        </div>

        <div class="profile-settings">
            <h3>Profile Settings</h3>
            <div>
                <label class="text-label" for="refining-market-tax">Include market tax</label>
                <select id="refining-market-tax-percentage" onchange="updateNumbers(this)"">
                    <option value="6.5">( 6.5%)</option>
                    <option value="10.5">(10.5%)</option>
                </select>
                <label class="switch">
                    <input type="checkbox" id="refining-market-tax" onchange="updateNumbers()">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>

            <div>
                <label class="text-label" for="refine-from-t2">Stack profit from 
                    <select id="refine-from-t2-dropdown" onchange="updateNumbers(this)"">
                        <option value="2">T2</option>
                        <option value="3">T3</option>
                        <option value="4">T4</option>
                        <option value="5">T5</option>
                        <option value="6">T6</option>
                        <option value="7">T7</option>
                    </select>
                </label>
                <label class="switch">
                    <input type="checkbox" id="refine-from-t2" onchange="updateNumbers()">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>

            <div>
                <label class="text-label" for="profile-settings-focus-columns">Hide focus columns</label>
                <label class="switch">
                    <input type="checkbox" id="profile-settings-focus-columns" onchange="toggleColumns('focus')">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>

            <div>
                <label class="text-label" for="profile-settings-detail-columns">Show detail columns</label>
                <label class="switch">
                    <input type="checkbox" id="profile-settings-detail-columns" onchange="toggleColumns('detail')">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>
        </div>

        <div class="data-settings">
            <h3>Table settings</h3>
            <div>
                <label class="text-label" for="table-settings-flip-table">Flip table</label>
                <label class="switch">
                    <input type="checkbox" id="table-settings-flip-table" onchange="flipTable()">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>

            <div>
                <label class="text-label" for="table-settings-hide-rows">Hide unused rows</label>
                <label class="switch">
                    <input type="checkbox" id="table-settings-hide-rows" onchange="hideRows()">
                    <span class="slider round"></span>
                </label>
            </div>
            <br>

            <div style="margin-bottom:0.3rem;">
                <label class="text-label" for="clear-table-button">Clear current table data</label>
                <button class="profile-button" onclick="clearTable('table')">Table</button>
            </div>
            <br>

            <div>
                <label class="text-label" for="clear-table-button">Clear all data</label>
                <button class="profile-button" onclick="clearTable('all')">All</button>
            </div>
        </div>

        <div class="data-scrape">
            <h3>Data Scrape</h3>

            <div>
                <label class="text-label" for="server-select">Select server</label>
                <select id="server-select">
                    <option value="west">West</option>
                    <option value="east">East</option>
                </select>
            </div>
            <br>

            <div>
                <label for="refining-city">Location</label>
                <select id="refining-city">
                    <option value="martlock">Martlock</option>
                    <option value="thetford">Thetford</option>
                    <option value="fortsterling">Fort Sterling</option>
                    <option value="lymhurst">Lymhurst</option>
                    <option value="bridgewatch">Bridgewatch</option>
                    <option value="caerleon">Caerleon</option>
                </select>
            </div>
            <br>

            <div class="scrape-button">
                <label class="text-label" for="scrape-button">Pull resource prices</label>
                <button class="profile-button" onclick="pullResourcePrices()">Pull</button>
            </div>
            <br>

            <div class="scrape-button">
                <label class="text-label" for="scrape-button">Pull product prices</label>
                <button class="profile-button" onclick="pullProductPrices()">Pull</button>
            </div>
        </div>

    </div>

    <div id="refining" class="refining">
        <table id="refining-table" class="detail-table">
            <thead>
                <tr>
                    <th>TIER</th>
                    <th>RESOURCE</th>
                    <th>PRICE</th>
                    <th>PRODUCT</th>
                    <th>PRICE</th>
                    <th>PROFIT</th>
                    <th>PROFIT %</th>
                    <th id="focus-column">FOCUS COST</th>
                    <th id="focus-column">FOCUS PROFIT</th>
                    <th id="focus-column">PROFIT/FOCUS</th>
                    <th id="detail-column">RESOURCE COST</th>
                    <th id="detail-column">STATION TAX</th>
                    <th id="detail-column">MARKET TAX</th>
                </tr>
            </thead>

            <tbody id="resouce-table-body">
                
            </tbody>
        </table>
    </div>

    <footer>
        <p>I hope you find this refining calculator useful! If you encounter any issues or have any suggestions on how to improve it, send me a message on Discord (Peter#8103).</p>
        <p>Created by <a target="_blank" href="https://github.com/Brannstroom">Brannstroom</a></p>
    </footer>

    </body>

    <script src="scripts/main.js"></script>
</html>